@import "./fonts.css";
@import "tailwindcss";
@plugin "@tailwindcss/typography";

@source not "../vendor";
@source not "../kirby";

@theme {
  --font-mono:
    "Departure Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
    "Liberation Mono", "Courier New", monospace;

  --container-prose: 42rem;

  --color-bg: oklch(0.9753 0.004 106.47);
  --color-bg-secondary: oklch(1 0 0);
  --color-accent: oklch(0.6759 0.21747 38.8022);
  --color-accent-hover: oklch(from var(--color-accent) calc(l * 0.95) c h);
  --color-accent-bg: oklch(from var(--color-accent) l c h / 0.1);
  --color-border: oklch(92.3% 0.003 48.717);
  --color-primary: oklch(14.7% 0.004 49.25);
  --color-secondary: oklch(37.4% 0.01 67.558);
  --color-tertiary: oklch(0.553 0.013 58.071);
  --color-muted: oklch(70.9% 0.01 56.259);

  /* Subtle colors for backgrounds and borders */
  --color-subtle: oklch(from var(--color-primary) l c h / 0.05);
  --color-subtle-border: oklch(from var(--color-primary) l c h / 0.1);

  --radius-big: 1rem;
  --radius-medium: 0.5rem;
  --radius-small: 0.25rem;
}

/*
 * Link hover effect: Underline transforms to highlight mark
 * Ref: https://dannyguo.medium.com/animated-multiline-link-underlines-with-css
 */
.prose a:not(:has(svg), :has(img)) {
  text-decoration-color: var(--color-border);
  text-underline-offset: 2px;
  background-position: 0% 100%;
  background-image: linear-gradient(var(--color-accent), var(--color-accent));
  background-repeat: no-repeat;
  background-size: 0% 100%;
  transition:
    background-size 0.3s ease-in-out,
    text-decoration-color 0.3s ease-in-out,
    color 0.3s ease-in-out;
}

.prose a:not(:has(svg), :has(img)):hover,
.prose a:not(:has(svg), :has(img)):focus {
  background-size: 100% 100%;
  text-decoration-color: transparent;
  color: white;
}

/* Global prose font size */
.prose {
  font-size: 0.875rem; /* text-sm */
}

/* Card-specific prose sizing: text-sm base, text-base headings */
.prose-card {
  font-size: 0.875rem; /* text-sm */
}

.prose-card :is(h1, h2, h3, h4, h5, h6) {
  font-size: 1rem; /* text-base */
  font-weight: 500; /* medium */
  margin-top: 1em;
  margin-bottom: 0.5em;
}

.prose-card :is(h1, h2, h3, h4, h5, h6):first-child {
  margin-top: 0;
}

.prose-card img {
  border-radius: var(--radius-small);
}

/* Footnotes styling */
.prose .footnote-ref {
  font-size: 0.75em;
  color: var(--color-accent);
  text-decoration: none;
  background: none;
}

.prose .footnote-ref:hover {
  text-decoration: underline;
  background: none;
}

.prose .footnotes {
  margin-top: 2rem;
  padding-top: 1rem;
  border-top: 1px solid var(--color-border);
  font-size: 0.875rem;
  color: var(--color-secondary);
}

.prose .footnotes hr {
  display: none;
}

.prose .footnotes ol {
  padding-left: 1.25rem;
}

.prose .footnotes li {
  margin-bottom: 0.5rem;
}

.prose .footnotes .footnote-backref {
  color: var(--color-accent);
  text-decoration: none;
  margin-left: 0.25rem;
  background: none;
}

.prose .footnotes .footnote-backref:hover {
  text-decoration: underline;
  background: none;
}

/* Responsive video embeds (YouTube, Vimeo) */
.prose figure.video {
  width: 100%;
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}

.prose figure.video iframe {
  width: 100%;
  aspect-ratio: 16 / 9;
  border-radius: var(--radius-medium);
}
